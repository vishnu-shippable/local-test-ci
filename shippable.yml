language: java

jdk:
  - oraclejdk8
  
env:
#   - IMG_VER="v6.2.4"
#   - IMG_VER="v6.5.4"
  - IMG_VER="master"

build:
  pre_ci_boot:
    image_name: drydock/c7javall
    image_tag: $IMG_VER
    pull: true
  ci:
    # Apply shipctl patch
    - git clone https://github.com/scriptnull/node.git nodeRepo
    - ./nodeRepo/shipctl/x86_64/CentOS_7/install.sh
    - rm -rf nodeRepo
    - source shipctl jdk set oraclejdk8
    # Create folders for test and code coverage
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - mvn install
    - cp -r target shippable/codecoverage
    - ls
    - javac Hello.java
    - java Hello
